<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>My Home Page</title>
    <link rel="stylesheet" href="../../stylehome.css">

</head>

<body>
    <header>
    </header>
    <main>
        <h1>The Central District</h1>
        <div>
            <p>The Central District is one of the seven administrative districts of the State of Israel.
                Its area is 1,293 square kilometers, and its population density is 1,434 people per square
                kilometer.
                The capital of the district is the city of Ramla, and the largest city in the district is Rishon
                LeZion.
                The district court is located in Lod.
                The district includes four sub-districts:
            <ul>
                <li>Ramla sub-district</li>
                <li>HaSharon sub-district
                </li>
                <li>Petah Tikva sub-district
                </li>
                <li> Rehovot sub-district</p>
                </li>
            </ul>
            <b><span style="font-size: larger;">My Projects:</span></b><br><br><br><br><br><br>
            <div style="width: 90%; text-align:center; margin-top: -170px;">
                <img src="../CleanPicsOfDists/DIST5.png" class="zoom" alt="My Profile Photo: const1">
            </div>
            <table id="projectsTable">
                <thead>
                    <tr>
                        <th>Project_Id</th>
                        <th>consultant_ID</th>
                        <th>Project_Name</th>
                        <th>Status</th>
                        <th>District</th>
                        <th>Start_date</th>
                        <th>duration(Month)</th>
                        <th>End_date</th>
                        <th>duration(Days)</th>
                        <th>Link_to_Project</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="sidebar">
            <iframe src="../../../../Components/sidebar.html"></iframe>
        </div>
    </main>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const districtName = document.querySelector('h1').textContent.trim();

            fetch('../projects.csv')
                .then(response => response.text())
                .then(data => {
                    const table = document.getElementById('projectsTable');
                    const rows = data.trim().split('\n').slice(1); // Exclude header row

                    rows.forEach(row => {
                        const cells = row.split(',');
                        const projectDistrict = cells[4].trim();

                        if (projectDistrict === districtName) {
                            const newRow = table.insertRow();

                            cells.forEach(cell => {
                                if (cell.trim() !== '') {
                                    const newCell = newRow.insertCell();
                                    newCell.textContent = cell;
                                }
                            });

                            // Add button in the last cell of each row
                            const buttonCell = newRow.insertCell();
                            const button = document.createElement('button');
                            button.textContent = 'View Project';
                            button.addEventListener('click', () => {
                                // Redirect to the new page
                                window.location.href = 'project-details.html'; // Replace with the desired URL
                            });
                            buttonCell.appendChild(button);
                        }
                    });
                })
                .catch(error => {
                    console.log('Error fetching projects data:', error);
                });
        });
    </script>

    <footer>
        <script src="../../index.js"></script>
        <button class="button-1" role="button" onclick="history.back()">Back To Authorities List</button>
    </footer>
</body>
<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }

    th,
    td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
    }
</style>

</html>